
<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8" />
        <title>Implementierungsleitfaden ISiK-Sicherheit - Rechtedelegation und Client-Authentifizierung</title>

        <link rel="icon" href="guide/ImplementierungsleitfadenISiK-Sicherheit/files/styles/common/favicon.ico" />

        <script src="guide/ImplementierungsleitfadenISiK-Sicherheit/files/styles/common/jquery/jquery.min.js"></script>
        <script src="guide/ImplementierungsleitfadenISiK-Sicherheit/files/styles/common/bootstrap/bootstrap.min.js"></script>

        <link rel="stylesheet" href="guide/ImplementierungsleitfadenISiK-Sicherheit/files/styles/common/main.min.css" />
        <link rel="stylesheet" href="guide/ImplementierungsleitfadenISiK-Sicherheit/files/styles/common/bootstrap/bootstrap.min.css" />
        <link rel="stylesheet" href="guide/ImplementierungsleitfadenISiK-Sicherheit/files/styles/common/rendering/rendering.min.css" />

        <script src="guide/ImplementierungsleitfadenISiK-Sicherheit/files/styles/common/rendering/stu3TreeTable.min.js"></script>
        <script src="guide/ImplementierungsleitfadenISiK-Sicherheit/files/styles/common/rendering/baseTreetable.min.js"></script>

        <link rel="stylesheet" href="guide/ImplementierungsleitfadenISiK-Sicherheit/files/styles/twolevelmenu/style.css?v=1d8112c52093900" />

    </head>

    <body>

        <div id="ig-viewer">

            <div class="ig-view-content">

                <div id="ig-view-twolevelmenu">

                    <div class="header" role="banner" aria-label="Header">
                        


<nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="Einfuehrung.html">
                Implementierungsleitfaden ISiK-Sicherheit - Rechtedelegation und Client-Authentifizierung
            </a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">


                    <li>
                        <a href="Einfuehrung.html">
                            Einf&#xFC;hrung
                        </a>
                    </li>

                        <li>
                            <a href="Motivation.html">
                                Motivation
                            </a>
                        </li>
                        <li class="dropdown">

                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                &#xDC;bergreifende Festlegungen <span class="caret"></span>
                            </a>

                            <ul class="dropdown-menu">

                                    <li>
                                        <a href="UebergreifendeFestlegungen.html">
                                            &#xDC;bergreifende Festlegungen
                                        </a>
                                    </li>
                                    <li role="separator" class="divider"></li>

                                    <li>
                                        <a href="Methodik.html">
                                            Methodik
                                        </a>
                                    </li>
                                    <li>
                                        <a href="BestaetigungsrelevanteSysteme.html">
                                            Best&#xE4;tigungsrelevante Systeme
                                        </a>
                                    </li>
                                    <li>
                                        <a href="KompatibilitaetDerGematikSpezifikation.html">
                                            Kompatibilit&#xE4;t der gematik-Spezifikation
                                        </a>
                                    </li>

                            </ul>
                        </li>
                        <li class="dropdown">

                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                Smart App Launch <span class="caret"></span>
                            </a>

                            <ul class="dropdown-menu">

                                    <li>
                                        <a href="SmartAppLaunch.html">
                                            Smart App Launch
                                        </a>
                                    </li>
                                    <li role="separator" class="divider"></li>

                                    <li>
                                        <a href="Schritt1RegistierungClient.html">
                                            Schritt 1 - Registrierung Client
                                        </a>
                                    </li>
                                    <li>
                                        <a href="Schritt2ClientAutorisierung.html">
                                            Schritt 2 - Client Autorisierung
                                        </a>
                                    </li>
                                    <li>
                                        <a href="Schritt3EvaluierungAutorisierungsanfrage.html">
                                            Schritt 3 - Evaluierung Autorisierungsanfrage
                                        </a>
                                    </li>
                                    <li>
                                        <a href="Schritt4AustauschAutorisierungscodesZugangstoken.html">
                                            Schritt 4 - Austausch - Autorisierungscodes Zugangstoken
                                        </a>
                                    </li>
                                    <li>
                                        <a href="Schritt5FhirRestInteraktion.html">
                                            Schritt 5 - FHIR Restful Interaktion
                                        </a>
                                    </li>
                                    <li>
                                        <a href="Schritt6RefreshToken.html">
                                            Schritt 6 - Refresh Token &amp; Revocation
                                        </a>
                                    </li>

                            </ul>
                        </li>
                        <li>
                            <a href="ScopesAndLaunchContext.html">
                                Scopes &amp; Launch Context
                            </a>
                        </li>
                        <li>
                            <a href="Conformance.html">
                                Conformance
                            </a>
                        </li>

            </ul>
        </div>
    </div>
</nav>

                    </div>

                    <div class="content container" role="main" aria-label="Main content">
                        

    <div class="row">


        <div class="col-md-24">

            <div id="preview-content">

                <h1 id="schritt-6-refresh-token-revocation">Schritt 6: Refresh Token &amp; Revocation</h1>
<h2 id="refresh-tokens">Refresh Tokens</h2>
<p>Die Gültigkeitsdauer eines Access-Tokens kann beliebig durch das bestätigungsrelevante System gewählt werden. Mit Hinblick auf <a href="https://datatracker.ietf.org/doc/html/rfc6819#section-3.1.2">RFC6819 -  OAuth 2.0 Threat Model and Security Considerations - Limited Access Token Lifetime</a> SOLLTE die Gültigkeitsdauer beschränkt werden auf Minuten oder Stunden. Das Gültigkeitsdatum wird im Access Token durch den Parameter &quot;expires_in&quot; angegeben. Alternativ kann die Gültigkeit des Tokens über den <div class='error'>Command 'pagelink' could not render: File was not found for TokenIntrospection</div> abgefragt werden.</p>
<p>Um eine häufige Authentifizierung der Benutzer*in und/oder des Clients zu vermeiden MUSS das besätigungsrelevante System die Austellung von Refresh Tokens unterstützen.</p>
<p>Folgende Anforderungen aus <a href="https://hl7.org/fhir/smart-app-launch/STU2/app-launch.html#refresh-access-token">SMART App Launch - 2.0.12 - Refresh access token</a> sind zu beachten:</p>
<ul>
<li>Der &quot;offline_access&quot; Scope MUSS unterstützt werden, der &quot;online_access&quot; Scope SOLLTE unterstützt werden.</li>
<li>Ein Refresh Token MUSS an die anfordernde Client Id gebunden werden, d.h. eine abweichende Client Id (übermittelt durch die Autorisierung des Clients) DARF NICHT verwendbar sein um ein neues Access Token auszustellen.</li>
<li>Der Autorisierungsserver MUSS sicherstellen bei der Ausstellung eines neuen Access Tokens beachten, dass nur ein Subset oder die gleiche Menge an Scopes erlaubt werden im Vergleich zum originalen Access Tokens. Fordert der Client neue Scopes an, SOLLTE das System die Menge aller Scopes einschränken auf die zuvor erlaubten Scopes.</li>
<li>Der Launch Context MUSS zurückgegeben werden, falls die entsprechenden Scopes durch den Client angefordert wurden oder für das im originale Access Token angefordert wurden.</li>
</ul>
<p>Alle verpflichtenden Implementierungsdetails aus <a href="https://hl7.org/fhir/smart-app-launch/STU2/app-launch.html#refresh-access-token">SMART App Launch - 2.0.12 - Refresh access token</a> MÜSSEN durch den Autorisierungsserver unterstützt werden.</p>
<hr />
<h3 id="beispiel">Beispiel</h3>
<h2 id="token-revocation">Token Revocation</h2>
<p>Ein Access-Token MUSS zu einem beliebigen Zeitpunkt durch einen beliebigen Client per [RFC7009 - OAuth 2.0 Token Revocation] zurückgezogen werden können.
Es MUSS sichergestellt werden, dass kein zeitlicher Verzug zwischen der Bestätigung der zuvorgenannten Anfrage und der Invalidierung des Tokens herscht, d.h nach einer Revocation-Anfrage MUSS sichergestellt werden, dass Anfragen beim Ressourcen-Server mit einem entsprechenden Token zuruckgewiesen werden. Hierzu wird die Verwendung eines Introspection-Endpunktes nach <a href="https://datatracker.ietf.org/doc/html/rfc7662">RFC7662 - OAuth 2.0 Token Introspection</a> empfohlen.</p>
<hr />
<h3 id="beispiel-1">Beispiel</h3>



            </div>

        </div>
    </div>

                    </div>

                </div>

            </div>

            <div class="ig-view-footer" role="contentinfo" aria-label="Footer">
                
<div class="container">
    <div class="row">
        <p>Powered by <b>SIMPLIFIER.NET</b></p>
        <div>
            HL7<sup>&reg;</sup> and FHIR<sup>&reg;</sup> are the registered trademarks of Health Level Seven International
        </div>
    </div>
</div>

            </div>

        </div>

    </body>

</html>